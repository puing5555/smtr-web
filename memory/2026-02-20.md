# 2026-02-20

## invest-sns / invest-engine 프로젝트

### 완료
- 네이버 증권 뉴스 크롤러 완성
  - `src/collectors/naver_news.py`, API: `/api/news`, `/api/feed`, `POST /trigger/news-collection`
  - DB: News 모델, URL 중복방지, 중요도 자동계산, 종목코드 자동추출
- 기본 필터 UI 완성 (종목검색→태그 + 공시유형/중요도 체크리스트)
- test-timeline.html에 통합피드 구현

### 인프라
- Next.js 16 Turbopack → 이 환경에서 next dev 안 됨
- 대안: `npx http-server . -p 3001` static 서빙
- 외부 접속: cloudflare tunnel 사용 (`npx cloudflared tunnel --url http://localhost:3001`)
- 백엔드: `python main.py` → localhost:8000, cloudflare tunnel로 외부 노출
- 텔레그램 그룹: 인플루언서주식ai (id: -1003764256213)

### 완료 (병렬 서브에이전트 6개 모두 완료)
1. ✅ 초세분화 필터 UI (마켓: 한국/미국/코인, 섹터 20+, 공시유형 27개, 뉴스카테고리 16개, 중요도4단계, 기간)
2. ✅ 미국주식 뉴스 크롤러 (Yahoo Finance RSS, 23개 수집 성공)
3. ✅ 코인 뉴스 크롤러 (CoinDesk + CoinTelegraph RSS, 40개 수집)
4. ✅ 텔레그램 알림 시스템 (중요도 0.7+ 자동 알림, 그룹 -1003764256213)
5. ✅ 자동 수집 스케줄러 (APScheduler, 장중/비장중 주기 다름)
6. ✅ GPT-4o-mini 한글 번역 (미국/코인 뉴스 자동 번역, ai_summary 필드)

### 현재 실행 중인 서비스
- invest-engine: python main.py (port 8000, session: ember-shoal)
- http-server: port 3001 (session: sharp-mist)
- cloudflare tunnel 프론트: poems-affects-reasonable-lauren.trycloudflare.com → :3001
- cloudflare tunnel 백엔드: sufficiently-emacs-fifteen-kings.trycloudflare.com → :8000
- 터널 URL은 재시작마다 바뀜, test-timeline.html 내 API_BASE도 업데이트 필요

### 주요 파일 구조
- invest-engine/src/collectors/: naver_news.py, us_news.py, crypto_news.py
- invest-engine/src/alerts/telegram_alert.py
- invest-engine/src/services/translator.py
- invest-engine/src/scheduler.py
- invest-sns/test-timeline.html (프로토타입 UI)
- .env에 OPENAI_API_KEY, DART_API_KEY 등 있음

### 추가 완료
7. ✅ 대시보드 (나만의 큐레이션) + 타임라인 + 저장글 + 구독 + 프로필 5탭 SPA
8. ✅ 메모장 (종목별/자유메모) + 스크랩 (URL 스크랩+북마크 통합, 폴더/태그)
9. 🔧 진행중: SNS 피드 탭 (사람들 글 + 스크랩→SNS 자동발행)

### 확정된 탭 구조 (5개 - 최종)
1. 🏠 대시보드 (나만의 큐레이션)
2. 💬 SNS (사람들 글 피드)
3. 📰 타임라인 (공시/뉴스)
4. 📝 노트 (메모+스크랩 통합)
5. 👤 프로필
- 스크랩시 "SNS 발행" 체크하면 SNS 피드에 자동 글 발행
- 외부 URL 붙여넣기로 스크랩 가능

### 현재 터널 URL (재시작마다 바뀜)
- 프론트: mean-interact-furthermore-economics.trycloudflare.com → :3001
- 백엔드: 아직 안 열음 (API 터널 필요시 재설정)

### 유저 요구사항
- UI/UX는 나중에, 기능 먼저
- Next.js 통합은 나중에, 지금은 HTML 프로토타입
- 필터 아주 세분화 (마켓/섹터/공시유형/뉴스카테고리/중요도/기간)
- 종목 검색→태그 형태, 멀티셀렉트
- 대시보드 = 나만의 큐레이션 (구독+세팅+포트폴리오 기반)
- 스크랩시 SNS 발행 체크하면 자동 글 올라감
- 외부 사이트 글 URL 붙여넣기로 스크랩
- 저장글+스크랩 하나로 통합
- 로그인 필요 (나중에 Supabase)
- 텔레그램 알림봇은 그룹에서 뺌 (bot was kicked)
- 투자 관련 모든 것을 한곳에서: "투자자의 세컨드 브레인"

### 🔴 중요: 기존 프로토타입 & 인플루언서 데이터 위치
- 경로: C:\Users\Mario\.openclaw\workspace\
- 프로토타입: guru_tracker_prototype_v23.html (최신)
- 검증 파이프라인: smtr_verify.py, smtr_verify2.py, smtr_verify_batch.py, smtr_verify_collect.py, smtr_verify_strong.py, smtr_verify_summary.py, smtr_verify_prompt.md
- 코린이 아빠: smtr_corinpapa_integration.py, smtr_corinpapa_batch.py, corinpapa_monitor.py
- 인플루언서: 박두환, 이효석, 세상학개론, 코린이 아빠

### 전체 트랙 구조 (이전 대화에서 확정)
**트랙 1: 프로토타입 고도화 (데이터 공장)**
- 코린이 아빠 배치 → 데이터 정제 → 프로토타입 반영
- 검증 파이프라인 4단계:
  1. GPT-4o-mini로 자막에서 시그널 1차 추출
  2. GPT-4o로 2차 자동 검증 (확실/의심/거부)
  3. 직원이 "의심" 플래그만 검토 (HTML 검토 페이지)
  4. 오분류 패턴 축적 → 프롬프트 자동 개선
- 인플루언서 계속 추가

**트랙 2: SNS 웹앱 (서비스 껍데기)** ✅ 프로토타입 완료

**트랙 3: 알림/데이터 수집 (서비스 엔진)**
- 관심종목 실시간 알림 (DART 공시, 급등락)
- 아침 브리핑 / 마감 요약
- 쏠림 데이터 수집 (지금부터 쌓아야 나중에 씀)
- 뉴스 크롤링 + AI 분류 ✅ 완료

트랙 2+3 합쳐져서 최종 서비스. 유저 강조: "속도가 핵심"

### 오늘 마지막 상태
- 코린이 아빠 배치 완료 → v24 프로토타입 생성 (42개 시그널)
- SNS 피드 탭 완성
- 검증 파이프라인 구조 확인 완료 (4단계)

### 내일 TODO
1. 메모+스크랩 → 📝 노트 탭 통합
2. 인플루언서 탭에 guru_tracker v24 기능 통합
3. 코린이 아빠 데이터 검증 파이프라인 돌리기 (smtr_verify)
4. 최종 탭 구조: 대시보드 / SNS / 인플루언서 / 타임라인 / 노트
5. 프로필/설정은 사이드메뉴로

### 추가 요구사항
- 프로필에 디폴트로 **투자성향** 표시 (가치투자자, 모멘텀투자자, 단타, 등)
- 프로필에 **투자성향** 표시 (가치투자자, 모멘텀투자자, 단타 등) — 별도 항목
- 프로필에 **뱃지** 시스템 — 별도 항목, 뱃지상 형태 (비트코이너, 등록 인플루언서 등)
