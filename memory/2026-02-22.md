# 2026-02-22 작업 로그

## SMTR 프로젝트 진행

### 검증 파이프라인 v2 구축
- 파이프라인: **Sonnet 추출 → 인간 리뷰 → 거부 시 Opus 4 자동 분석**
- 서브에이전트가 review-server.py에 Opus 4 자동 검증 기능 구현 완료
- 거부 시 Claude가 자막 전체 재분석 + 프롬프트 개선 제안
- 커밋: `ad42b44`
- **서버 통합: 8899 하나로** (8900 Opus 별도, 8901 제거)
- 유저 요구: "검증사이트는 하나만 남겨"

### 인간 리뷰 완료 (코린이 아빠)
- 169개 시그널 중 **154 승인, 15 거부**
- 거부 패턴:
  1. 시그널 타입 오류 (5건) - SELL→우려, POSITIVE→중립 등
  2. 종목 자체 틀림 (4건) - 사이버스토어, 브로커리지파이낸셜, 체인링크→업링크, 한성엔지니어링
  3. 과거 맥락을 현재로 오해 (3건)
  4. 시그널이 아닌 것 (2건) - 대안 비교, 다음주제 예고
  5. 종목 코드 의문 (1건) - THAR

### Sonnet 프롬프트 개선 포인트
- 과거 회상 vs 현재 의견 구분 강화
- "~같은 거 사라" = 시그널 아님 (대안 비교)
- 종목명 정확도 검증 필요
- 다음 주제 예고 = 시그널 아님

### 서버/인프라
- localtunnel 자주 죽음 → 자동 재시작 스크립트 필요
- Next.js 16 + Node v24: SWC 네이티브 바인딩 호환 문제 (WASM fallback으로 해결)
- Next.js 15로 다운그레이드 시도했다가 Tailwind v4 호환 안 돼서 다시 16으로 복원
- 폰트 에러: GeistMonoVF.woff2 없음 → Google Fonts Inter로 교체

### 현재 서비스 상태
- 8899: 통합 리뷰서버 (Sonnet + Opus4 검증)
- 3001: Next.js 프론트엔드 (투자SNS 5탭 앱)
- 터널: smtr-sonnet.loca.lt, smtr-app.loca.lt

### 유저 피드백/원칙
- "opus 분석이 내가 적은 사유보다 더 중요해" → Opus가 자막 전체 읽고 판단하는 게 핵심
- "사이트 하나로 통합" → 별도 서버 만들지 말고 기존에 합치기
