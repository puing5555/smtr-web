# 2026-02-24

## SMTR 웹앱 작업

### 영상 요약 (videoSummary) 데이터 반영
- 리뷰사이트 HTML (`signal-review-v3.html`)에서 `video_summary` 필드 추출
- `SIGNALS_DATA` 변수명으로 저장됨 (line 131, 인라인 JSON)
- video_id 기준으로 매핑 → 169개 시그널 전체에 videoSummary 주입
- **문제**: 스토어(`influencers.ts`)의 Signal 인터페이스와 매핑에 `videoSummary` 누락 → 추가 후 해결

### 영상 제목 한글 번역
- 78개 고유 제목 중 대부분 영어 → 서브에이전트로 한글 번역 실행
- 서브에이전트가 따옴표 깨뜨림 (9개 unquoted, 2개 escaped quote 오류) → `fix-titles.js`, `fix-titles2.js`로 수정
- **교훈**: 서브에이전트 결과물은 반드시 빌드 검증 필요

### 화면 흔들림 (flickering) 수정
- **원인**: `useSignalReturns` 훅이 CoinGecko API를 반복 호출 → 상태 업데이트 → 리렌더링 루프
- **수정 1**: `influencerSignals`를 `useMemo`로 감싸서 참조 안정화
- **수정 2**: `useSignalReturns`에 `useRef(fetchedRef)` 추가하여 중복 fetch 방지
- **수정 3**: 수익률 `<td>`에 `minWidth: 80px` 고정 → 레이아웃 시프트 방지
- 유저 피드백: "처음엔 안 흔들리는데 나중에 흔들림" → API 응답 도착 시 레이아웃 변화가 원인

### 배포 흐름 (확인됨)
- `invest-sns/` → `npx next build` → `out/` 생성
- `out/*` → `smtr-web/` 복사 → git push
- GitHub Pages: https://puing5555.github.io/smtr-web/

### 핵심 파일 구조
- **데이터**: `invest-sns/src/data/corinpapa-signals.ts` (169개 시그널, videoSummary 포함)
- **스토어**: `invest-sns/src/stores/influencers.ts` (Signal 인터페이스 + corinpapa 매핑)
- **컴포넌트**: `invest-sns/src/app/(main)/influencers/[id]/InfluencerDetailClient.tsx` (테이블 + 모달)
- **수익률 훅**: `invest-sns/src/lib/hooks/useSignalReturns.ts` (CoinGecko API)
- **리뷰 HTML**: `smtr-web/signal-review-v3.html` (SIGNALS_DATA, video_summary 포함)
