# 2026-02-24

## 시그널 리뷰 서버 v5 완성
- `invest-sns/review-server-v5.py` 생성 (port 8900)
- Opus 검토 기능 추가 (자막 읽고 시그널 자동 검증)
- 리뷰 데이터 서버 파일 저장 (`_review_results_v5.json`, `_opus_review_results.json`) — localStorage 아님
- v3은 localStorage 기반이라 서버 죽으면 데이터 날아감 → v5에서 해결

## 리뷰 현황
- 177개 중복제거 시그널, 유저가 v3에서 167 승인 / 5 거부 완료
- 거부 5개 사유가 v3 브라우저 localStorage에만 있어서 아직 못 꺼냄
- 유저에게 F12 콘솔에서 추출 요청함 (아직 미완)
- 터널: https://language-tamil-source-zones.trycloudflare.com

## 유저 피드백
- "정확도가 높아졌어 이대로 가자" — 현재 파이프라인(Claude Sonnet 추출 → 사람 리뷰) 유지
- "요약하고 매수신호를 뽑는게 좋다" — 현재 방향 긍정적

## Opus 거부 분석 완료
- 5개 거부 시그널 Opus 분석 → 전부 거부 타당
- 패턴 3가지:
  1. **일반논평_시그널화** (BMNR) — 교육적 비교를 투자 시그널로 오해석
  2. **조건부_과대해석** (CC, 이더리움) — "~하면", "불안한 분들" 한정 조언을 확정 시그널로
  3. **할루시네이션** (NVDA, PLTR) — 자막에 없는 내용을 Sonnet이 만들어냄 ⚠️ 가장 심각
- 분석 결과: `invest-sns/_opus_rejected_analysis.json`

## 프롬프트 업데이트 (v2)
- `step0_extract_8types_claude.py`에 `FALSE_SIGNAL_RULES` 추가
- 일반논평 차단, 조건부 차단, 할루시네이션 방지 (자막 원문 검증 필수)
- 커밋: "Opus 분석 기반 프롬프트 업데이트 - 오추출 방지 규칙 v2 추가"

## 유저 요구사항 정리
- **v3 리뷰 페이지 구조 절대 유지** (https://puing5555.github.io/smtr-web/signal-review-v3.html)
- GitHub Pages 기반, localStorage 리뷰, 밝은 테마
- Opus 검토는 거부된 시그널만 (전체 X)
- 파이프라인: Claude Sonnet(추출) → 사람(리뷰) → 거부된 것만 Opus 검토
- v5 서버 등 새 사이트 만들지 말 것 — 유저가 7번이나 v3 유지 강조함

## 주의사항
- review-server.py (v3 서버)의 REVIEW_FILE은 상대경로 — CWD에 따라 다른 곳에 저장됨
- `_review_results_backup.json`은 UTF-16 BOM + 깨진 문자열로 파싱 어려움
- cloudflared 터널 불안정 — GitHub Pages가 더 나은 호스팅
- v3 HTML에 Opus 검토 버튼 추가 작업 진행 중 (서브에이전트 완료했으나 확인 필요)
