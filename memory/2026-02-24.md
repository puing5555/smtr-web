# 2026-02-24

## invest-sns 차트 작업
- **차트 전체기간 확대**: StockChart.tsx에 `fitContent()` 초기 호출 추가 + 시그널 날짜 기준 데이터 기간 확장
- **시그널 타입 필터 이동**: StockChartClient.tsx에서 차트 위 → 차트 아래(시그널 목록 위)로 이동
- **구글 스타일 드래그 수익률**: 차트에서 드래그하면 선택 구간의 가격변동/수익률(%)/날짜범위 표시

## 리뷰 페이지 GitHub Pages 배포
- **URL**: https://puing5555.github.io/smtr-web/review
- Next.js /review 페이지 새로 만들어서 정적 배포
- 177개 시그널 데이터 빌드 시 임베드, 필터/검색/승인/거부 기능, localStorage 저장
- 기존에 `signal-review-v3.html` (단독 HTML)과 `review-server-v5.py` (port 8900 로컬서버)가 있었음
- 유저가 "배포된 리뷰사이트 주소가 뭐였지" 물어봄 → 실은 배포된 적 없었고, 이번에 처음 배포

## 리뷰서버 로컬 실행 실패
- review-server-v5.py (port 8900) serve_forever() 후 바로 종료 → 원인 불명
- 결국 GitHub Pages 정적 배포로 방향 전환

## signal-review-v3.html 리뷰 결과 복원 (중요!)
- **기존 상태**: 177건 전부 리뷰 완료 (약 5건 거부, 나머지 승인) + Opus가 거부건 재검토 완료
- 빌드 배포 시 signal-review-v3.html이 smtr-web에서 삭제됨 → 복원
- HTML은 `localStorage('signal-reviews-v2')` 키에 리뷰 저장, ID는 `video_id + '_' + asset`
- 백업: `smtr_data/corinpapa1106/_review_results_backup.json` (utf-16 인코딩! 주의)
- Opus 결과: `_opus_review_results.json` (utf-16, 116건)
- 백업 JSON이 인코딩 깨져서 161/177건만 복원 (16건 누락) → 유저 불만
- **교훈**: smtr-web 빌드 배포 시 signal-review-v3.html 절대 삭제하지 말 것!
- **교훈**: 리뷰 결과를 정기적으로 utf-8로 백업해둘 것

## 기술 노트
- PowerShell에서 `[symbol]` 같은 경로는 glob → `Resolve-Path` + backtick escape
- `edit` 도구의 `newText`가 빈 문자열이면 에러 → regex로 처리
- smtr-web git remote: `puing5555/smtr-web.git`
- 배포 과정: invest-sns build → out/ → smtr-web에 복사 → git push
- _review_results_backup.json은 utf-16 인코딩 + 깨진 JSON → `json.loads(strict=False)` 실패 → regex 추출로 우회
