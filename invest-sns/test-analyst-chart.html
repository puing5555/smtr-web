<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ïï†ÎÑêÎ¶¨Ïä§Ìä∏ Ï∞®Ìä∏ - ÏÇºÏÑ±Ï†ÑÏûê</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lightweight-charts/dist/lightweight-charts.standalone.production.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <style>
        :root {
            --bg: #0a0e17;
            --bg2: #111827;
            --bg3: #1a2332;
            --bg4: #243044;
            --accent: #3b82f6;
            --accent2: #60a5fa;
            --green: #10b981;
            --red: #ef4444;
            --yellow: #f59e0b;
            --purple: #a855f7;
            --text: #e2e8f0;
            --text2: #94a3b8;
            --text3: #64748b;
            --border: #1e293b;
            --border2: #334155;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
            overflow-x: hidden;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header & Search */
        .header {
            background: var(--bg2);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 24px;
            border: 1px solid var(--border);
        }

        .search-section {
            display: flex;
            align-items: center;
            gap: 16px;
            flex-wrap: wrap;
        }

        .search-container {
            position: relative;
            flex: 1;
            min-width: 280px;
        }

        .search-input {
            width: 100%;
            padding: 12px 48px 12px 16px;
            background: var(--bg3);
            border: 2px solid var(--border);
            border-radius: 12px;
            color: var(--text);
            font-size: 16px;
            font-family: inherit;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--accent);
            background: var(--bg4);
        }

        .search-icon {
            position: absolute;
            right: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text3);
            font-size: 18px;
        }

        .search-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: var(--bg3);
            border: 1px solid var(--border2);
            border-radius: 12px;
            margin-top: 4px;
            z-index: 1000;
            max-height: 200px;
            overflow-y: auto;
            display: none;
        }

        .search-dropdown.active {
            display: block;
        }

        .dropdown-item {
            padding: 12px 16px;
            cursor: pointer;
            transition: background 0.2s ease;
            border-bottom: 1px solid var(--border);
        }

        .dropdown-item:last-child {
            border-bottom: none;
        }

        .dropdown-item:hover {
            background: var(--bg4);
        }

        .dropdown-item.selected {
            background: var(--accent);
            color: white;
        }

        .stock-info {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-left: auto;
        }

        .stock-price {
            font-size: 24px;
            font-weight: 600;
        }

        .stock-change {
            padding: 6px 12px;
            border-radius: 8px;
            font-weight: 500;
            font-size: 14px;
        }

        .stock-change.positive {
            background: rgba(16, 185, 129, 0.2);
            color: var(--green);
        }

        .stock-change.negative {
            background: rgba(239, 68, 68, 0.2);
            color: var(--red);
        }

        /* Chart Section */
        .chart-section {
            background: var(--bg2);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 24px;
            border: 1px solid var(--border);
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .chart-title {
            font-size: 20px;
            font-weight: 600;
        }

        .chart-controls {
            display: flex;
            gap: 8px;
        }

        .time-btn {
            padding: 8px 16px;
            background: var(--bg3);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text2);
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 14px;
        }

        .time-btn:hover, .time-btn.active {
            background: var(--accent);
            color: white;
            border-color: var(--accent);
        }

        #chartContainer {
            height: 400px;
            position: relative;
            border-radius: 12px;
            overflow: hidden;
        }

        /* Tooltip */
        .custom-tooltip {
            position: absolute;
            background: var(--bg4);
            border: 1px solid var(--border2);
            border-radius: 12px;
            padding: 16px;
            z-index: 1000;
            pointer-events: none;
            min-width: 280px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.3s ease;
        }

        .custom-tooltip.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .tooltip-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--border);
        }

        .tooltip-analyst {
            font-weight: 600;
            font-size: 14px;
        }

        .tooltip-firm {
            font-size: 12px;
            color: var(--text2);
        }

        .tooltip-recommendation {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
        }

        .recommendation-badge {
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 500;
        }

        .recommendation-badge.buy {
            background: rgba(16, 185, 129, 0.2);
            color: var(--green);
        }

        .recommendation-badge.sell {
            background: rgba(239, 68, 68, 0.2);
            color: var(--red);
        }

        .recommendation-badge.hold {
            background: rgba(245, 158, 11, 0.2);
            color: var(--yellow);
        }

        .tooltip-target {
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 8px;
        }

        .tooltip-summary {
            font-size: 13px;
            color: var(--text2);
            line-height: 1.4;
        }

        /* Analysts Section */
        .analysts-section {
            background: var(--bg2);
            border-radius: 16px;
            padding: 24px;
            border: 1px solid var(--border);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .section-title {
            font-size: 20px;
            font-weight: 600;
        }

        .analysts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 16px;
        }

        .rank-card {
            background: var(--bg3);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .rank-card:hover {
            border-color: var(--accent);
            transform: translateY(-2px);
            box-shadow: 0 8px 32px rgba(59, 130, 246, 0.2);
        }

        .rank-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }

        .rank-position {
            font-size: 24px;
            min-width: 40px;
        }

        .analyst-info {
            flex: 1;
        }

        .analyst-name {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .analyst-firm {
            font-size: 14px;
            color: var(--text2);
        }

        .accuracy-badge {
            background: linear-gradient(135deg, var(--accent), var(--accent2));
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
        }

        .rank-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px solid var(--border);
        }

        .detail-item {
            text-align: center;
        }

        .detail-label {
            font-size: 12px;
            color: var(--text3);
            margin-bottom: 4px;
        }

        .detail-value {
            font-size: 14px;
            font-weight: 500;
        }

        .target-price {
            color: var(--accent2);
        }

        .status-icon {
            font-size: 18px;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 1;
        }

        .modal-content {
            background: var(--bg2);
            border-radius: 16px;
            padding: 32px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
            border: 1px solid var(--border2);
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }

        .modal.active .modal-content {
            transform: scale(1);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 24px;
        }

        .modal-title {
            font-size: 24px;
            font-weight: 600;
        }

        .close-btn {
            background: none;
            border: none;
            color: var(--text2);
            font-size: 24px;
            cursor: pointer;
            padding: 4px;
            transition: color 0.2s ease;
        }

        .close-btn:hover {
            color: var(--text);
        }

        .profile-section {
            margin-bottom: 24px;
        }

        .profile-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 16px;
        }

        .profile-avatar {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--accent), var(--purple));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: 600;
            color: white;
        }

        .profile-details h3 {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .profile-details p {
            color: var(--text2);
            font-size: 14px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }

        .stat-card {
            background: var(--bg3);
            padding: 16px;
            border-radius: 12px;
            text-align: center;
            border: 1px solid var(--border);
        }

        .stat-value {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .stat-label {
            font-size: 12px;
            color: var(--text3);
        }

        .history-chart {
            margin-bottom: 24px;
        }

        .history-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 12px;
        }

        #historyChart {
            height: 200px;
        }

        .coverage-list {
            margin-top: 24px;
        }

        .coverage-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 12px;
        }

        .coverage-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background: var(--bg3);
            border-radius: 8px;
            margin-bottom: 8px;
        }

        .coverage-stock {
            font-weight: 500;
        }

        .coverage-accuracy {
            color: var(--accent2);
            font-weight: 500;
        }

        .report-modal .modal-content {
            max-width: 500px;
        }

        .report-summary {
            background: var(--bg3);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid var(--border);
        }

        .summary-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 12px;
            color: var(--accent2);
        }

        .summary-text {
            line-height: 1.6;
            margin-bottom: 8px;
        }

        .report-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .detail-card {
            background: var(--bg3);
            padding: 16px;
            border-radius: 12px;
            border: 1px solid var(--border);
            text-align: center;
        }

        .detail-card h4 {
            font-size: 14px;
            color: var(--text3);
            margin-bottom: 8px;
        }

        .detail-card .value {
            font-size: 20px;
            font-weight: 600;
        }

        .pdf-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: var(--accent);
            color: white;
            padding: 12px 20px;
            border-radius: 10px;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.2s ease;
        }

        .pdf-link:hover {
            background: var(--accent2);
            transform: translateY(-1px);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 12px;
            }
            
            .search-section {
                flex-direction: column;
                align-items: stretch;
            }
            
            .stock-info {
                margin-left: 0;
                justify-content: space-between;
            }
            
            #chartContainer {
                height: 300px;
            }
            
            .analysts-grid {
                grid-template-columns: 1fr;
            }
            
            .modal-content {
                padding: 20px;
                width: 95%;
            }
        }

        /* Marker styles */
        .chart-marker {
            position: absolute;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: 600;
            cursor: pointer;
            z-index: 100;
            transition: all 0.2s ease;
        }

        .chart-marker:hover {
            transform: scale(1.2);
        }

        .chart-marker.buy {
            background: var(--green);
            color: white;
        }

        .chart-marker.sell {
            background: var(--red);
            color: white;
        }

        .chart-marker.hold {
            background: var(--yellow);
            color: white;
        }

        .marker-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: var(--accent);
            color: white;
            border-radius: 50%;
            width: 16px;
            height: 16px;
            font-size: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header & Search -->
        <div class="header">
            <div class="search-section">
                <div class="search-container">
                    <input type="text" class="search-input" placeholder="Ï¢ÖÎ™©ÏùÑ Í≤ÄÏÉâÌïòÏÑ∏Ïöî..." value="ÏÇºÏÑ±Ï†ÑÏûê">
                    <span class="search-icon">üîç</span>
                    <div class="search-dropdown" id="searchDropdown">
                        <div class="dropdown-item selected" data-symbol="005930">ÏÇºÏÑ±Ï†ÑÏûê (005930)</div>
                        <div class="dropdown-item" data-symbol="000660">SKÌïòÏù¥ÎãâÏä§ (000660)</div>
                        <div class="dropdown-item" data-symbol="035420">NAVER (035420)</div>
                        <div class="dropdown-item" data-symbol="005380">ÌòÑÎåÄÏ∞® (005380)</div>
                        <div class="dropdown-item" data-symbol="051910">LGÌôîÌïô (051910)</div>
                    </div>
                </div>
                <div class="stock-info">
                    <span class="stock-price">71,200Ïõê</span>
                    <span class="stock-change positive">+1,200 (+1.71%)</span>
                </div>
            </div>
        </div>

        <!-- Chart Section -->
        <div class="chart-section">
            <div class="chart-header">
                <h2 class="chart-title">Ï£ºÍ∞Ä Ï∞®Ìä∏ & Ïï†ÎÑêÎ¶¨Ïä§Ìä∏ Î¶¨Ìè¨Ìä∏</h2>
                <div class="chart-controls">
                    <button class="time-btn" data-period="1M">1M</button>
                    <button class="time-btn" data-period="3M">3M</button>
                    <button class="time-btn active" data-period="6M">6M</button>
                    <button class="time-btn" data-period="1Y">1Y</button>
                </div>
            </div>
            <div id="chartContainer"></div>
        </div>

        <!-- Analysts Section -->
        <div class="analysts-section">
            <div class="section-header">
                <h2 class="section-title">Ïï†ÎÑêÎ¶¨Ïä§Ìä∏ Îû≠ÌÇπ</h2>
            </div>
            <div class="analysts-grid" id="analystsGrid">
                <!-- Analysts will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Tooltip -->
    <div class="custom-tooltip" id="chartTooltip"></div>

    <!-- Analyst Profile Modal -->
    <div class="modal" id="profileModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Ïï†ÎÑêÎ¶¨Ïä§Ìä∏ ÌîÑÎ°úÌïÑ</h2>
                <button class="close-btn">&times;</button>
            </div>
            <div id="profileContent">
                <!-- Content will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Report Detail Modal -->
    <div class="modal report-modal" id="reportModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Î¶¨Ìè¨Ìä∏ ÏÉÅÏÑ∏</h2>
                <button class="close-btn">&times;</button>
            </div>
            <div id="reportContent">
                <!-- Content will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <script>
        // Sample Data
        const sampleData = {
            candlestick: [
                { time: '2024-08-21', open: 72500, high: 74200, low: 71800, close: 73100 },
                { time: '2024-08-22', open: 73100, high: 73800, low: 72200, close: 72900 },
                { time: '2024-08-23', open: 72900, high: 73500, low: 71500, close: 72200 },
                { time: '2024-08-26', open: 72200, high: 72800, low: 70900, close: 71400 },
                { time: '2024-08-27', open: 71400, high: 72100, low: 70500, close: 71800 },
                { time: '2024-08-28', open: 71800, high: 72600, low: 71200, close: 72000 },
                { time: '2024-08-29', open: 72000, high: 73200, low: 71600, close: 72800 },
                { time: '2024-08-30', open: 72800, high: 73100, low: 72200, close: 72600 },
                { time: '2024-09-02', open: 72600, high: 73800, low: 72100, close: 73300 },
                { time: '2024-09-03', open: 73300, high: 74000, low: 72800, close: 73500 },
                { time: '2024-09-04', open: 73500, high: 74200, low: 73000, close: 73800 },
                { time: '2024-09-05', open: 73800, high: 74500, low: 73200, close: 74100 },
                { time: '2024-09-06', open: 74100, high: 74800, low: 73600, close: 74300 },
                { time: '2024-09-09', open: 74300, high: 75000, low: 73900, close: 74600 },
                { time: '2024-09-10', open: 74600, high: 75200, low: 74000, close: 74800 },
                { time: '2024-09-11', open: 74800, high: 75100, low: 74200, close: 74500 },
                { time: '2024-09-12', open: 74500, high: 74900, low: 73800, close: 74200 },
                { time: '2024-09-13', open: 74200, high: 74600, low: 73500, close: 74000 },
                { time: '2024-09-16', open: 74000, high: 74400, low: 73200, close: 73600 },
                { time: '2024-09-17', open: 73600, high: 74100, low: 72900, close: 73300 },
                { time: '2024-09-18', open: 73300, high: 73800, low: 72600, close: 73000 },
                { time: '2024-09-19', open: 73000, high: 73500, low: 72200, close: 72800 },
                { time: '2024-09-20', open: 72800, high: 73200, low: 72000, close: 72400 },
                { time: '2024-09-23', open: 72400, high: 72900, low: 71600, close: 72100 },
                { time: '2024-09-24', open: 72100, high: 72600, low: 71300, close: 71800 },
                { time: '2024-09-25', open: 71800, high: 72300, low: 71000, close: 71500 },
                { time: '2024-09-26', open: 71500, high: 72000, low: 70800, close: 71200 },
                { time: '2024-09-27', open: 71200, high: 71700, low: 70500, close: 70900 },
                { time: '2024-09-30', open: 70900, high: 71400, low: 70200, close: 70600 },
                { time: '2024-10-01', open: 70600, high: 71100, low: 69900, close: 70300 },
                { time: '2024-10-02', open: 70300, high: 70800, low: 69600, close: 70000 },
                { time: '2024-10-04', open: 70000, high: 70500, low: 69300, close: 69800 },
                { time: '2024-10-07', open: 69800, high: 70300, low: 69000, close: 69500 },
                { time: '2024-10-08', open: 69500, high: 70000, low: 68800, close: 69200 },
                { time: '2024-10-10', open: 69200, high: 69700, low: 68500, close: 69000 },
                { time: '2024-10-11', open: 69000, high: 69500, low: 68200, close: 68800 },
                { time: '2024-10-14', open: 68800, high: 69300, low: 68000, close: 68500 },
                { time: '2024-10-15', open: 68500, high: 69000, low: 67800, close: 68200 },
                { time: '2024-10-16', open: 68200, high: 68700, low: 67500, close: 68000 },
                { time: '2024-10-17', open: 68000, high: 68500, low: 67200, close: 67800 },
                { time: '2024-10-18', open: 67800, high: 68300, low: 67000, close: 67500 },
                { time: '2024-10-21', open: 67500, high: 68000, low: 66800, close: 67200 },
                { time: '2024-10-22', open: 67200, high: 67700, low: 66500, close: 67000 },
                { time: '2024-10-23', open: 67000, high: 67500, low: 66200, close: 66800 },
                { time: '2024-10-24', open: 66800, high: 67300, low: 66000, close: 66500 },
                { time: '2024-10-25', open: 66500, high: 67000, low: 65800, close: 66200 },
                { time: '2024-10-28', open: 66200, high: 66700, low: 65500, close: 66000 },
                { time: '2024-10-29', open: 66000, high: 66500, low: 65200, close: 65800 },
                { time: '2024-10-30', open: 65800, high: 66300, low: 65000, close: 65500 },
                { time: '2024-10-31', open: 65500, high: 66000, low: 64800, close: 65200 },
                { time: '2024-11-01', open: 65200, high: 65700, low: 64500, close: 65000 },
                { time: '2024-11-04', open: 65000, high: 65500, low: 64200, close: 64800 },
                { time: '2024-11-05', open: 64800, high: 65300, low: 64000, close: 64500 },
                { time: '2024-11-06', open: 64500, high: 65000, low: 63800, close: 64200 },
                { time: '2024-11-07', open: 64200, high: 64700, low: 63500, close: 64000 },
                { time: '2024-11-08', open: 64000, high: 64500, low: 63200, close: 63800 },
                { time: '2024-11-11', open: 63800, high: 64300, low: 63000, close: 63500 },
                { time: '2024-11-12', open: 63500, high: 64000, low: 62800, close: 63200 },
                { time: '2024-11-13', open: 63200, high: 63700, low: 62500, close: 63000 },
                { time: '2024-11-14', open: 63000, high: 63500, low: 62200, close: 62800 },
                { time: '2024-11-15', open: 62800, high: 63300, low: 62000, close: 62500 },
                { time: '2024-11-18', open: 62500, high: 63000, low: 61800, close: 62200 },
                { time: '2024-11-19', open: 62200, high: 62700, low: 61500, close: 62000 },
                { time: '2024-11-20', open: 62000, high: 62500, low: 61200, close: 61800 },
                { time: '2024-11-21', open: 61800, high: 62300, low: 61000, close: 61500 },
                { time: '2024-11-22', open: 61500, high: 62000, low: 60800, close: 61200 },
                { time: '2024-11-25', open: 61200, high: 61700, low: 60500, close: 61000 },
                { time: '2024-11-26', open: 61000, high: 61500, low: 60200, close: 60800 },
                { time: '2024-11-27', open: 60800, high: 61300, low: 60000, close: 60500 },
                { time: '2024-11-28', open: 60500, high: 61000, low: 59800, close: 60200 },
                { time: '2024-11-29', open: 60200, high: 60700, low: 59500, close: 60000 },
                { time: '2024-12-02', open: 60000, high: 60800, low: 59700, close: 60500 },
                { time: '2024-12-03', open: 60500, high: 61200, low: 60200, close: 60900 },
                { time: '2024-12-04', open: 60900, high: 61600, low: 60600, close: 61300 },
                { time: '2024-12-05', open: 61300, high: 62000, low: 61000, close: 61700 },
                { time: '2024-12-06', open: 61700, high: 62400, low: 61400, close: 62100 },
                { time: '2024-12-09', open: 62100, high: 62800, low: 61800, close: 62500 },
                { time: '2024-12-10', open: 62500, high: 63200, low: 62200, close: 62900 },
                { time: '2024-12-11', open: 62900, high: 63600, low: 62600, close: 63300 },
                { time: '2024-12-12', open: 63300, high: 64000, low: 63000, close: 63700 },
                { time: '2024-12-13', open: 63700, high: 64400, low: 63400, close: 64100 },
                { time: '2024-12-16', open: 64100, high: 64800, low: 63800, close: 64500 },
                { time: '2024-12-17', open: 64500, high: 65200, low: 64200, close: 64900 },
                { time: '2024-12-18', open: 64900, high: 65600, low: 64600, close: 65300 },
                { time: '2024-12-19', open: 65300, high: 66000, low: 65000, close: 65700 },
                { time: '2024-12-20', open: 65700, high: 66400, low: 65400, close: 66100 },
                { time: '2024-12-23', open: 66100, high: 66800, low: 65800, close: 66500 },
                { time: '2024-12-24', open: 66500, high: 67200, low: 66200, close: 66900 },
                { time: '2024-12-26', open: 66900, high: 67600, low: 66600, close: 67300 },
                { time: '2024-12-27', open: 67300, high: 68000, low: 67000, close: 67700 },
                { time: '2024-12-30', open: 67700, high: 68400, low: 67400, close: 68100 },
                { time: '2024-12-31', open: 68100, high: 68800, low: 67800, close: 68500 },
                { time: '2025-01-02', open: 68500, high: 69200, low: 68200, close: 68900 },
                { time: '2025-01-03', open: 68900, high: 69600, low: 68600, close: 69300 },
                { time: '2025-01-06', open: 69300, high: 70000, low: 69000, close: 69700 },
                { time: '2025-01-07', open: 69700, high: 70400, low: 69400, close: 70100 },
                { time: '2025-01-08', open: 70100, high: 70800, low: 69800, close: 70500 },
                { time: '2025-01-09', open: 70500, high: 71200, low: 70200, close: 70900 },
                { time: '2025-01-10', open: 70900, high: 71600, low: 70600, close: 71300 },
                { time: '2025-01-13', open: 71300, high: 72000, low: 71000, close: 71700 },
                { time: '2025-01-14', open: 71700, high: 72400, low: 71400, close: 72100 },
                { time: '2025-01-15', open: 72100, high: 72800, low: 71800, close: 72500 },
                { time: '2025-01-16', open: 72500, high: 73200, low: 72200, close: 72900 },
                { time: '2025-01-17', open: 72900, high: 73600, low: 72600, close: 73300 },
                { time: '2025-01-20', open: 73300, high: 74000, low: 73000, close: 73700 },
                { time: '2025-01-21', open: 73700, high: 74400, low: 73400, close: 74100 },
                { time: '2025-01-22', open: 74100, high: 74800, low: 73800, close: 74500 },
                { time: '2025-01-23', open: 74500, high: 75200, low: 74200, close: 74900 },
                { time: '2025-01-24', open: 74900, high: 75600, low: 74600, close: 75300 },
                { time: '2025-01-27', open: 75300, high: 76000, low: 75000, close: 75700 },
                { time: '2025-01-28', open: 75700, high: 76400, low: 75400, close: 76100 },
                { time: '2025-01-29', open: 76100, high: 76800, low: 75800, close: 76500 },
                { time: '2025-01-30', open: 76500, high: 77200, low: 76200, close: 76900 },
                { time: '2025-01-31', open: 76900, high: 77600, low: 76600, close: 77300 },
                { time: '2025-02-03', open: 77300, high: 78000, low: 77000, close: 77700 },
                { time: '2025-02-04', open: 77700, high: 78400, low: 77400, close: 78100 },
                { time: '2025-02-05', open: 78100, high: 78800, low: 77800, close: 78500 },
                { time: '2025-02-06', open: 78500, high: 79200, low: 78200, close: 78900 },
                { time: '2025-02-07', open: 78900, high: 79600, low: 78600, close: 79300 },
                { time: '2025-02-10', open: 79300, high: 80000, low: 79000, close: 79700 },
                { time: '2025-02-11', open: 79700, high: 80400, low: 79400, close: 80100 },
                { time: '2025-02-12', open: 80100, high: 80800, low: 79800, close: 80500 },
                { time: '2025-02-13', open: 80500, high: 81200, low: 80200, close: 80900 },
                { time: '2025-02-14', open: 80900, high: 81600, low: 80600, close: 81300 },
                { time: '2025-02-17', open: 81300, high: 82000, low: 81000, close: 81700 },
                { time: '2025-02-18', open: 81700, high: 82400, low: 81400, close: 82100 },
                { time: '2025-02-19', open: 82100, high: 82800, low: 81800, close: 82500 },
                { time: '2025-02-20', open: 82500, high: 83200, low: 82200, close: 82900 },
                { time: '2025-02-21', open: 82900, high: 71500, low: 70800, close: 71200 }
            ],
            
            analysts: [
                {
                    id: 1,
                    name: 'ÍπÄÌòÑÏö∞',
                    firm: 'ÏÇºÏÑ±Ï¶ùÍ∂å',
                    accuracy: 85,
                    rank: 1,
                    latestTarget: 78000,
                    status: 'up',
                    sector: 'ITÌïòÎìúÏõ®Ïñ¥',
                    reports: [
                        {
                            date: '2025-02-15',
                            target: 78000,
                            recommendation: 'buy',
                            summary: [
                                'Î∞òÎèÑÏ≤¥ ÏóÖÌô© ÌöåÎ≥µÏúºÎ°ú Î©îÎ™®Î¶¨ Í∞ÄÍ≤© ÏÉÅÏäπÏÑ∏ ÏßÄÏÜç',
                                'HBM ÏãúÏû•ÏóêÏÑúÏùò Í≤ΩÏüÅÏö∞ÏúÑ ÌôïÎåÄÎ°ú ÏàòÏùµÏÑ± Í∞úÏÑ†',
                                '2025ÎÖÑ Ïã§Ï†Å ÌÑ¥Ïñ¥ÎùºÏö¥Îìú Í∏∞ÎåÄÍ∞ê Î∞òÏòÅÌïú Î™©ÌëúÍ∞Ä ÏÉÅÌñ•'
                            ]
                        },
                        {
                            date: '2024-12-20',
                            target: 75000,
                            recommendation: 'buy',
                            summary: [
                                'AI Î∞òÎèÑÏ≤¥ ÏàòÏöî Ï¶ùÍ∞ÄÎ°ú HBM3E Ï∂úÌïòÎüâ ÌôïÎåÄ',
                                'Ï§ëÍµ≠ Ïä§ÎßàÌä∏Ìè∞ ÏãúÏû• ÌöåÎ≥µÏÑ∏Î°ú Î©îÎ™®Î¶¨ ÏàòÏöî Ï¶ùÍ∞Ä',
                                '4Î∂ÑÍ∏∞ Ïã§Ï†Å Í∞úÏÑ† Ï†ÑÎßùÏóê Îî∞Î•∏ Ìà¨ÏûêÏùòÍ≤¨ Ïú†ÏßÄ'
                            ]
                        }
                    ],
                    coverage: [
                        { stock: 'SKÌïòÏù¥ÎãâÏä§', accuracy: 88 },
                        { stock: 'LGÎîîÏä§ÌîåÎ†àÏù¥', accuracy: 79 },
                        { stock: 'LGÏ†ÑÏûê', accuracy: 82 }
                    ]
                },
                {
                    id: 2,
                    name: 'Î∞ïÏßÄÎØº',
                    firm: 'ÎØ∏ÎûòÏóêÏÖã',
                    accuracy: 82,
                    rank: 2,
                    latestTarget: 76000,
                    status: 'up',
                    sector: 'Î∞òÎèÑÏ≤¥',
                    reports: [
                        {
                            date: '2025-02-10',
                            target: 76000,
                            recommendation: 'buy',
                            summary: [
                                'Í∏ÄÎ°úÎ≤å Î©îÎ™®Î¶¨ ÏãúÏû• ÌöåÎ≥µÏúºÎ°ú ASP ÏÉÅÏäπ ÏßÄÏÜç',
                                'HBMÍ≥º DDR5 Îì± Í≥†Î∂ÄÍ∞Ä Ï†úÌíà ÎπÑÏ§ë ÌôïÎåÄ',
                                'ÌååÏö¥ÎìúÎ¶¨ ÏÇ¨ÏóÖ Í∞úÏÑ†ÏúºÎ°ú Ï†ÑÏ≤¥ ÏàòÏùµÏÑ± Ìñ•ÏÉÅ'
                            ]
                        },
                        {
                            date: '2025-01-05',
                            target: 73000,
                            recommendation: 'hold',
                            summary: [
                                '4Î∂ÑÍ∏∞ Ïã§Ï†ÅÏùÄ ÏòàÏÉÅ ÌïòÌöåÌñàÏúºÎÇò 1Î∂ÑÍ∏∞Î∂ÄÌÑ∞ Í∞úÏÑ†',
                                'DRAM Í∞ÄÍ≤© ÏÉÅÏäπÏÑ∏ Î≥∏Í≤©ÌôîÎ°ú ÎßàÏßÑ Í∞úÏÑ† Í∏∞ÎåÄ',
                                'Ìà¨ÏûêÏùòÍ≤¨ HOLD Ïú†ÏßÄ, Î™©ÌëúÍ∞ÄÎäî ÏÉÅÌñ• Ï°∞Ï†ï'
                            ]
                        }
                    ],
                    coverage: [
                        { stock: 'SKÌïòÏù¥ÎãâÏä§', accuracy: 85 },
                        { stock: 'ÏÇºÏÑ±SDI', accuracy: 77 },
                        { stock: 'TSMC', accuracy: 84 }
                    ]
                },
                {
                    id: 3,
                    name: 'Ïù¥ÏÑ±Ìõà',
                    firm: 'NHÌà¨Ïûê',
                    accuracy: 79,
                    rank: 3,
                    latestTarget: 75000,
                    status: 'up',
                    sector: 'ITÌïòÎìúÏõ®Ïñ¥',
                    reports: [
                        {
                            date: '2025-02-05',
                            target: 75000,
                            recommendation: 'buy',
                            summary: [
                                'AI ÏÑúÎ≤ÑÌñ• HBM ÏàòÏöî Í∏âÏ¶ùÏúºÎ°ú Í≥µÍ∏â Î∂ÄÏ°± Ïã¨Ìôî',
                                'Î©îÎ™®Î¶¨ ÏóÖÌô© Í∞úÏÑ†ÏúºÎ°ú Í∞ÄÍ≤© ÏÉÅÏäπÏÑ∏ Í∞ÄÏÜçÌôî',
                                'Ï§ëÏû•Í∏∞ ÏÑ±Ïû•ÎèôÎ†• ÌôïÎ≥¥Î°ú ÌîÑÎ¶¨ÎØ∏ÏóÑ Î∞∏Î•òÏóêÏù¥ÏÖò Ï†ïÎãπÌôî'
                            ]
                        },
                        {
                            date: '2024-11-15',
                            target: 70000,
                            recommendation: 'hold',
                            summary: [
                                '3Î∂ÑÍ∏∞ Ïã§Ï†Å Î∂ÄÏßÑÏúºÎ°ú Îã®Í∏∞ Ï°∞Ï†ï Î∂àÍ∞ÄÌîº',
                                'ÌïòÏßÄÎßå HBM ÏãúÏû• ÏÑ†Ï†êÏúºÎ°ú Ï§ëÏû•Í∏∞ Ï†ÑÎßù Í∏çÏ†ïÏ†Å',
                                'Ï£ºÍ∞Ä Ï°∞Ï†ïÏãú Îß§Ïàò Í∏∞ÌöåÎ°ú ÌåêÎã®'
                            ]
                        }
                    ],
                    coverage: [
                        { stock: 'SKÌïòÏù¥ÎãâÏä§', accuracy: 81 },
                        { stock: 'NAVER', accuracy: 76 },
                        { stock: 'LGÏ†ÑÏûê', accuracy: 80 }
                    ]
                },
                {
                    id: 4,
                    name: 'ÏµúÏú†ÏßÑ',
                    firm: 'KBÏ¶ùÍ∂å',
                    accuracy: 76,
                    rank: 4,
                    latestTarget: 72000,
                    status: 'down',
                    sector: 'Î∞òÎèÑÏ≤¥',
                    reports: [
                        {
                            date: '2025-01-25',
                            target: 72000,
                            recommendation: 'hold',
                            summary: [
                                'HBM ÏàòÏöîÎäî Í∞ïÌïòÎÇò Í≤ΩÏüÅ Ïã¨ÌôîÎ°ú ÎßàÏßÑ ÏïïÎ∞ï',
                                'PC DRAM ÌöåÎ≥µ ÏßÄÏó∞ÏúºÎ°ú Ï†ÑÏ≤¥Ï†ÅÏù∏ Í∞úÏÑ† ÏÜçÎèÑ Ï†úÌïú',
                                'Ïã†Ï§ëÌïú Ï†ëÍ∑º ÌïÑÏöî, Î™©ÌëúÍ∞Ä ÌïòÌñ• Ï°∞Ï†ï'
                            ]
                        },
                        {
                            date: '2024-12-10',
                            target: 74000,
                            recommendation: 'buy',
                            summary: [
                                '4Î∂ÑÍ∏∞ HBM Ï∂úÌïòÎüâ Ï¶ùÍ∞ÄÎ°ú Ïã§Ï†Å Í∞úÏÑ† Í∏∞ÎåÄ',
                                'Ï§ëÍµ≠ Ï†ïÎ∂ÄÏùò Î∞òÎèÑÏ≤¥ ÏßÄÏõê Ï†ïÏ±ÖÏúºÎ°ú ÏàòÏöî ÌôïÎåÄ',
                                'Î∞∏Î•òÏóêÏù¥ÏÖò Îß§Î†•ÎèÑ ÎÜíÏïÑ Îß§Ïàò ÏùòÍ≤¨ Ïú†ÏßÄ'
                            ]
                        }
                    ],
                    coverage: [
                        { stock: 'SKÌïòÏù¥ÎãâÏä§', accuracy: 78 },
                        { stock: 'LGÌôîÌïô', accuracy: 74 },
                        { stock: 'ÌòÑÎåÄÏ∞®', accuracy: 77 }
                    ]
                },
                {
                    id: 5,
                    name: 'Ï†ïÎØºÏÑù',
                    firm: 'ÌïúÍµ≠Ìà¨Ïûê',
                    accuracy: 74,
                    rank: 5,
                    latestTarget: 74000,
                    status: 'up',
                    sector: 'ITÌïòÎìúÏõ®Ïñ¥',
                    reports: [
                        {
                            date: '2025-01-30',
                            target: 74000,
                            recommendation: 'buy',
                            summary: [
                                'Í∏ÄÎ°úÎ≤å IT Í∏∞ÏóÖÎì§Ïùò AI Ìà¨Ïûê ÌôïÎåÄÎ°ú HBM ÏàòÏöî Í∏âÏ¶ù',
                                'Î©îÎ™®Î¶¨ Ïû¨Í≥† Ï°∞Ï†ï ÏôÑÎ£åÎ°ú Í∞ÄÍ≤© ÏÉÅÏäπ ÏïïÎ†• Í∞ïÌôî',
                                '1Î∂ÑÍ∏∞Î∂ÄÌÑ∞ Î≥∏Í≤©Ï†ÅÏù∏ Ïã§Ï†Å Í∞úÏÑ† ÏÇ¨Ïù¥ÌÅ¥ ÏßÑÏûÖ'
                            ]
                        },
                        {
                            date: '2024-10-20',
                            target: 68000,
                            recommendation: 'hold',
                            summary: [
                                'Îã®Í∏∞ Ïã§Ï†Å Î∂ÄÏßÑ ÏßÄÏÜçÎêòÎÇò Íµ¨Ï°∞Ï†Å Í≤ΩÏüÅÎ†•ÏùÄ Ïú†ÏßÄ',
                                'HBM ÏãúÏû•ÏóêÏÑúÏùò Í∏∞Ïà†Ï†Å Ïö∞ÏúÑÎ°ú Ï§ëÏû•Í∏∞ ÏÑ±Ïû• ÌôïÏã†',
                                'Ï£ºÍ∞Ä ÌïòÎùΩÏãú Ï†êÏßÑÏ†Å Îß§Ïàò Ï†ÑÎûµ Í∂åÍ≥†'
                            ]
                        }
                    ],
                    coverage: [
                        { stock: 'SKÌïòÏù¥ÎãâÏä§', accuracy: 76 },
                        { stock: 'NAVER', accuracy: 72 },
                        { stock: 'Ïπ¥Ïπ¥Ïò§', accuracy: 75 }
                    ]
                },
                {
                    id: 6,
                    name: 'Í∞ïÏàòÏßÑ',
                    firm: 'Ïã†ÌïúÌà¨Ïûê',
                    accuracy: 71,
                    rank: 6,
                    latestTarget: 70000,
                    status: 'down',
                    sector: 'Î∞òÎèÑÏ≤¥',
                    reports: [
                        {
                            date: '2025-02-01',
                            target: 70000,
                            recommendation: 'hold',
                            summary: [
                                'Î©îÎ™®Î¶¨ ÏóÖÌô© ÌöåÎ≥µÏÑ∏Îäî ÌôïÏù∏ÎêòÎÇò ÏÜçÎèÑÍ∞Ä ÏòàÏÉÅÎ≥¥Îã§ ÏôÑÎßå',
                                'ÎåÄÎßå ÏßÄÏßÑ Î¶¨Ïä§ÌÅ¨ÏôÄ ÏßÄÏ†ïÌïôÏ†Å Î¶¨Ïä§ÌÅ¨ ÏÉÅÏ°¥',
                                'Î∞∏Î•òÏóêÏù¥ÏÖò Î∂ÄÎã¥ÏúºÎ°ú Ïã†Ï§ëÌïú Ï†ëÍ∑º ÌïÑÏöî'
                            ]
                        },
                        {
                            date: '2024-12-05',
                            target: 72000,
                            recommendation: 'buy',
                            summary: [
                                'HBM ÏãúÏû• ÌôïÎåÄÎ°ú Í≥†ÎßàÏßÑ Ï†úÌíà ÎπÑÏ§ë Ï¶ùÍ∞Ä',
                                'Ï§ëÍµ≠ Ïä§ÎßàÌä∏Ìè∞ ÏãúÏû• ÌöåÎ≥µÏúºÎ°ú Î™®Î∞îÏùº DRAM ÏàòÏöî Í∞úÏÑ†',
                                'Ï£ºÍ∞Ä Ï°∞Ï†ï Íµ¨Í∞ÑÏóêÏÑú Îß§Ïàò Í∏∞Ìöå Ï†úÍ≥µ'
                            ]
                        }
                    ],
                    coverage: [
                        { stock: 'SKÌïòÏù¥ÎãâÏä§', accuracy: 73 },
                        { stock: 'LGÎîîÏä§ÌîåÎ†àÏù¥', accuracy: 69 },
                        { stock: 'ÏÇºÏÑ±SDI', accuracy: 72 }
                    ]
                },
                {
                    id: 7,
                    name: 'Ïú§ÌÉúÌò∏',
                    firm: 'ÎåÄÏã†Ï¶ùÍ∂å',
                    accuracy: 69,
                    rank: 7,
                    latestTarget: 68000,
                    status: 'down',
                    sector: 'ITÌïòÎìúÏõ®Ïñ¥',
                    reports: [
                        {
                            date: '2025-01-15',
                            target: 68000,
                            recommendation: 'hold',
                            summary: [
                                'AI Í¥ÄÎ†® ÏàòÏöîÎäî Í∞ïÌïòÎÇò Ï†ÑÌÜµÏ†ÅÏù∏ IT ÏàòÏöî ÌöåÎ≥µ ÏßÄÏó∞',
                                'ÌôòÏú® Î≥ÄÎèôÏÑ±Í≥º ÏõêÏûêÏû¨ Í∞ÄÍ≤© ÏÉÅÏäπÏù¥ ÎßàÏßÑÏóê Î∂ÄÎã¥',
                                'Îã®Í∏∞Ï†ÅÏúºÎ°úÎäî Î∞ïÏä§Í∂å Îì±ÎùΩ Ï†ÑÎßù'
                            ]
                        },
                        {
                            date: '2024-11-01',
                            target: 65000,
                            recommendation: 'sell',
                            summary: [
                                '3Î∂ÑÍ∏∞ Ïã§Ï†Å Î∂ÄÏßÑÏúºÎ°ú Ïó∞Í∞Ñ Í∞ÄÏù¥ÎçòÏä§ ÌïòÌñ• Ï°∞Ï†ï',
                                'PCÏôÄ Î™®Î∞îÏùº ÏàòÏöî ÌöåÎ≥µÏù¥ ÏòàÏÉÅÎ≥¥Îã§ Îä¶Ïñ¥Ïßà Ï†ÑÎßù',
                                'Í≥†ÌèâÍ∞Ä Íµ¨Í∞ÑÏóêÏÑú Ï∞®ÏùµÏã§ÌòÑ Í∂åÍ≥†'
                            ]
                        }
                    ],
                    coverage: [
                        { stock: 'SKÌïòÏù¥ÎãâÏä§', accuracy: 71 },
                        { stock: 'LGÏ†ÑÏûê', accuracy: 67 },
                        { stock: 'NAVER', accuracy: 69 }
                    ]
                },
                {
                    id: 8,
                    name: 'ÏûÑÏÜåÏòÅ',
                    firm: 'ÌïòÎÇòÏ¶ùÍ∂å',
                    accuracy: 67,
                    rank: 8,
                    latestTarget: 69000,
                    status: 'up',
                    sector: 'Î∞òÎèÑÏ≤¥',
                    reports: [
                        {
                            date: '2025-01-20',
                            target: 69000,
                            recommendation: 'hold',
                            summary: [
                                'HBM Í≥µÍ∏âÎä•Î†• ÌôïÎåÄÎ°ú AI ÏàòÏöî ÎåÄÏùë Í∞ÄÎä•',
                                'ÌïòÏßÄÎßå Ï†ÑÎ∞©ÏÇ∞ÏóÖ ÏÑ±Ïû• ÎëîÌôîÎ°ú Ï†ÑÏ≤¥Ï†ÅÏù∏ ÏàòÏöî Ï¶ùÍ∞Ä Ï†úÌïú',
                                'Ï§ëÎ¶ΩÏ†Å ÏãúÍ∞ÅÏóêÏÑú Î∞∏Îü∞Ïä§ Ìà¨Ïûê Ï†ÑÎûµ Ï†úÏïà'
                            ]
                        },
                        {
                            date: '2024-09-25',
                            target: 66000,
                            recommendation: 'hold',
                            summary: [
                                'Î©îÎ™®Î¶¨ ÏóÖÌô© Î∞îÎã• ÌôïÏù∏ÌñàÏúºÎÇò ÌöåÎ≥µ ÏÜçÎèÑ Î∂àÌôïÏã§',
                                'ÌååÏö¥ÎìúÎ¶¨ ÏÇ¨ÏóÖ Ï†ÅÏûê ÏßÄÏÜçÏúºÎ°ú Ï†ÑÏ≤¥ ÏàòÏùµÏÑ± Ï†úÏïΩ',
                                'Ïû•Í∏∞ Ìà¨ÏûêÏûê Í¥ÄÏ†êÏóêÏÑú Ï†êÏßÑÏ†Å ÎπÑÏ§ë ÌôïÎåÄ'
                            ]
                        }
                    ],
                    coverage: [
                        { stock: 'SKÌïòÏù¥ÎãâÏä§', accuracy: 69 },
                        { stock: 'ÏÇºÏÑ±SDI', accuracy: 65 },
                        { stock: 'LGÌôîÌïô', accuracy: 68 }
                    ]
                }
            ]
        };

        // Chart setup
        let chart;
        let candlestickSeries;
        let consensusAreaSeries;
        let currentTooltip = null;

        function initChart() {
            const chartContainer = document.getElementById('chartContainer');
            
            chart = LightweightCharts.createChart(chartContainer, {
                width: chartContainer.clientWidth,
                height: 400,
                layout: {
                    background: { color: 'transparent' },
                    textColor: '#e2e8f0',
                    fontSize: 12,
                    fontFamily: 'Noto Sans KR'
                },
                grid: {
                    vertLines: { color: '#1e293b' },
                    horzLines: { color: '#1e293b' }
                },
                crosshair: {
                    mode: LightweightCharts.CrosshairMode.Normal,
                    vertLine: {
                        color: '#3b82f6',
                        width: 1,
                        style: LightweightCharts.LineStyle.Dashed,
                        labelBackgroundColor: '#3b82f6'
                    },
                    horzLine: {
                        color: '#3b82f6',
                        width: 1,
                        style: LightweightCharts.LineStyle.Dashed,
                        labelBackgroundColor: '#3b82f6'
                    }
                },
                rightPriceScale: {
                    borderColor: '#334155',
                    textColor: '#e2e8f0'
                },
                timeScale: {
                    borderColor: '#334155',
                    textColor: '#e2e8f0',
                    timeVisible: true,
                    secondsVisible: false
                }
            });

            candlestickSeries = chart.addCandlestickSeries({
                upColor: '#10b981',
                downColor: '#ef4444',
                borderDownColor: '#ef4444',
                borderUpColor: '#10b981',
                wickDownColor: '#ef4444',
                wickUpColor: '#10b981'
            });

            candlestickSeries.setData(sampleData.candlestick);

            // Add consensus band
            addConsensusBar();
            
            // Add markers for reports
            addReportMarkers();

            // Chart resize handler
            window.addEventListener('resize', () => {
                chart.applyOptions({
                    width: chartContainer.clientWidth
                });
            });
        }

        function addConsensusBar() {
            // Calculate target price range from all analysts
            const targets = sampleData.analysts.flatMap(analyst => 
                analyst.reports.map(report => report.target)
            );
            const minTarget = Math.min(...targets);
            const maxTarget = Math.max(...targets);

            // Create area series for consensus band
            consensusAreaSeries = chart.addAreaSeries({
                topColor: 'rgba(59, 130, 246, 0.1)',
                bottomColor: 'rgba(59, 130, 246, 0.05)',
                lineColor: 'rgba(59, 130, 246, 0.3)',
                lineWidth: 1
            });

            // Create data points for the consensus band
            const consensusData = sampleData.candlestick.map(candle => ({
                time: candle.time,
                value: maxTarget
            }));

            consensusAreaSeries.setData(consensusData);

            // Add another series for the bottom of the band
            const lowerBandSeries = chart.addLineSeries({
                color: 'rgba(59, 130, 246, 0.3)',
                lineWidth: 1
            });

            const lowerBandData = sampleData.candlestick.map(candle => ({
                time: candle.time,
                value: minTarget
            }));

            lowerBandSeries.setData(lowerBandData);
        }

        function addReportMarkers() {
            const markers = [];

            sampleData.analysts.forEach(analyst => {
                analyst.reports.forEach(report => {
                    const recommendation = report.recommendation;
                    let color = '#f59e0b'; // default yellow for hold
                    let text = '‚óè';

                    if (recommendation === 'buy') {
                        color = '#10b981';
                        text = 'üü¢';
                    } else if (recommendation === 'sell') {
                        color = '#ef4444';
                        text = 'üî¥';
                    } else {
                        color = '#f59e0b';
                        text = 'üü°';
                    }

                    markers.push({
                        time: report.date,
                        position: 'belowBar',
                        color: color,
                        shape: 'circle',
                        text: text,
                        id: `${analyst.id}-${report.date}`,
                        analyst: analyst,
                        report: report
                    });
                });
            });

            candlestickSeries.setMarkers(markers);

            // Add marker click handlers
            chart.subscribeClick((param) => {
                if (param.hoveredMarkerId) {
                    const marker = markers.find(m => m.id === param.hoveredMarkerId);
                    if (marker) {
                        showReportModal(marker.analyst, marker.report);
                    }
                }
            });

            // Add hover handlers for tooltips
            chart.subscribeCrosshairMove((param) => {
                if (param.hoveredMarkerId) {
                    const marker = markers.find(m => m.id === param.hoveredMarkerId);
                    if (marker) {
                        showTooltip(param, marker.analyst, marker.report);
                    }
                } else {
                    hideTooltip();
                }
            });
        }

        function showTooltip(param, analyst, report) {
            const tooltip = document.getElementById('chartTooltip');
            const recommendation = report.recommendation;
            let recommendationText = 'Ï§ëÎ¶Ω';
            let recommendationClass = 'hold';

            if (recommendation === 'buy') {
                recommendationText = 'Îß§Ïàò';
                recommendationClass = 'buy';
            } else if (recommendation === 'sell') {
                recommendationText = 'Îß§ÎèÑ';
                recommendationClass = 'sell';
            }

            tooltip.innerHTML = `
                <div class="tooltip-header">
                    <div>
                        <div class="tooltip-analyst">${analyst.name}</div>
                        <div class="tooltip-firm">${analyst.firm}</div>
                    </div>
                </div>
                <div class="tooltip-recommendation">
                    <span class="recommendation-badge ${recommendationClass}">${recommendationText}</span>
                    <span class="tooltip-target">Î™©ÌëúÍ∞Ä: ${report.target.toLocaleString()}Ïõê</span>
                </div>
                <div class="tooltip-summary">${report.summary[0]}</div>
            `;

            const chartRect = document.getElementById('chartContainer').getBoundingClientRect();
            tooltip.style.left = `${param.point.x + chartRect.left + 20}px`;
            tooltip.style.top = `${param.point.y + chartRect.top - 20}px`;
            tooltip.classList.add('visible');
            
            currentTooltip = tooltip;
        }

        function hideTooltip() {
            const tooltip = document.getElementById('chartTooltip');
            tooltip.classList.remove('visible');
            currentTooltip = null;
        }

        function showReportModal(analyst, report) {
            const modal = document.getElementById('reportModal');
            const content = document.getElementById('reportContent');

            const recommendation = report.recommendation;
            let recommendationText = 'Ï§ëÎ¶Ω';
            let recommendationClass = 'hold';

            if (recommendation === 'buy') {
                recommendationText = 'Îß§Ïàò';
                recommendationClass = 'buy';
            } else if (recommendation === 'sell') {
                recommendationText = 'Îß§ÎèÑ';
                recommendationClass = 'sell';
            }

            content.innerHTML = `
                <div class="report-summary">
                    <div class="summary-title">AI ÏöîÏïΩ</div>
                    ${report.summary.map(line => `<div class="summary-text">${line}</div>`).join('')}
                </div>
                
                <div class="report-details">
                    <div class="detail-card">
                        <h4>Ìà¨ÏûêÏùòÍ≤¨</h4>
                        <div class="value recommendation-badge ${recommendationClass}">${recommendationText}</div>
                    </div>
                    <div class="detail-card">
                        <h4>Î™©ÌëúÍ∞Ä</h4>
                        <div class="value target-price">${report.target.toLocaleString()}Ïõê</div>
                    </div>
                </div>
                
                <div style="text-align: center;">
                    <a href="#" class="pdf-link" onclick="alert('PDF Îã§Ïö¥Î°úÎìú Í∏∞Îä•ÏùÄ Îç∞Î™®Ïö©ÏûÖÎãàÎã§.')">
                        üìÑ ÏõêÎ¨∏ Î¶¨Ìè¨Ìä∏ Îã§Ïö¥Î°úÎìú
                    </a>
                </div>
            `;

            modal.classList.add('active');
        }

        function renderAnalysts() {
            const grid = document.getElementById('analystsGrid');
            const sortedAnalysts = [...sampleData.analysts].sort((a, b) => b.accuracy - a.accuracy);

            grid.innerHTML = sortedAnalysts.map((analyst, index) => {
                let rankIcon = `#${analyst.rank}`;
                if (index === 0) rankIcon = 'ü•á';
                else if (index === 1) rankIcon = 'ü•à';
                else if (index === 2) rankIcon = 'ü•â';

                const statusIcon = analyst.status === 'up' ? '‚úÖ' : '‚ùå';

                return `
                    <div class="rank-card" onclick="showAnalystProfile(${analyst.id})">
                        <div class="rank-header">
                            <span class="rank-position">${rankIcon}</span>
                            <div class="analyst-info">
                                <div class="analyst-name">${analyst.name}</div>
                                <div class="analyst-firm">${analyst.firm}</div>
                            </div>
                            <div class="accuracy-badge">${analyst.accuracy}%</div>
                        </div>
                        <div class="rank-details">
                            <div class="detail-item">
                                <div class="detail-label">ÏµúÍ∑º Î™©ÌëúÍ∞Ä</div>
                                <div class="detail-value target-price">${analyst.latestTarget.toLocaleString()}Ïõê</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Ï†ÅÏ§ëÎ•†</div>
                                <div class="detail-value">
                                    <span class="status-icon">${statusIcon}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function showAnalystProfile(analystId) {
            const analyst = sampleData.analysts.find(a => a.id === analystId);
            const modal = document.getElementById('profileModal');
            const content = document.getElementById('profileContent');

            content.innerHTML = `
                <div class="profile-section">
                    <div class="profile-header">
                        <div class="profile-avatar">${analyst.name.charAt(0)}</div>
                        <div class="profile-details">
                            <h3>${analyst.name}</h3>
                            <p>${analyst.firm} ‚Ä¢ ${analyst.sector}</p>
                        </div>
                    </div>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value">#${analyst.rank}</div>
                        <div class="stat-label">Ï†ÑÏ≤¥ Îû≠ÌÇπ</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">${analyst.accuracy}%</div>
                        <div class="stat-label">Ï†ÅÏ§ëÎ•†</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">${analyst.reports.length}</div>
                        <div class="stat-label">Î¶¨Ìè¨Ìä∏ Ïàò</div>
                    </div>
                </div>

                <div class="history-chart">
                    <div class="history-title">Î™©ÌëúÍ∞Ä ÌûàÏä§ÌÜ†Î¶¨</div>
                    <canvas id="historyChart"></canvas>
                </div>

                <div class="coverage-list">
                    <div class="coverage-title">Îã§Î•∏ Ïª§Î≤Ñ Ï¢ÖÎ™©</div>
                    ${analyst.coverage.map(stock => `
                        <div class="coverage-item">
                            <span class="coverage-stock">${stock.stock}</span>
                            <span class="coverage-accuracy">${stock.accuracy}%</span>
                        </div>
                    `).join('')}
                </div>
            `;

            modal.classList.add('active');

            // Create history chart
            setTimeout(() => {
                createHistoryChart(analyst);
            }, 100);
        }

        function createHistoryChart(analyst) {
            const ctx = document.getElementById('historyChart');
            if (!ctx) return;

            const dates = analyst.reports.map(r => r.date);
            const targets = analyst.reports.map(r => r.target);

            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: dates,
                    datasets: [{
                        label: 'Î™©ÌëúÍ∞Ä',
                        data: targets,
                        borderColor: '#3b82f6',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                color: '#1e293b'
                            },
                            ticks: {
                                color: '#94a3b8'
                            }
                        },
                        y: {
                            grid: {
                                color: '#1e293b'
                            },
                            ticks: {
                                color: '#94a3b8',
                                callback: function(value) {
                                    return value.toLocaleString() + 'Ïõê';
                                }
                            }
                        }
                    }
                }
            });
        }

        // Search functionality
        function initSearch() {
            const searchInput = document.querySelector('.search-input');
            const dropdown = document.getElementById('searchDropdown');

            searchInput.addEventListener('focus', () => {
                dropdown.classList.add('active');
            });

            searchInput.addEventListener('blur', () => {
                setTimeout(() => {
                    dropdown.classList.remove('active');
                }, 200);
            });

            searchInput.addEventListener('input', (e) => {
                const value = e.target.value.toLowerCase();
                const items = dropdown.querySelectorAll('.dropdown-item');
                
                items.forEach(item => {
                    const text = item.textContent.toLowerCase();
                    item.style.display = text.includes(value) ? 'block' : 'none';
                });
            });

            dropdown.addEventListener('click', (e) => {
                if (e.target.classList.contains('dropdown-item')) {
                    searchInput.value = e.target.textContent;
                    dropdown.classList.remove('active');
                    
                    // Update selected state
                    dropdown.querySelectorAll('.dropdown-item').forEach(item => {
                        item.classList.remove('selected');
                    });
                    e.target.classList.add('selected');
                }
            });
        }

        // Modal handlers
        function initModals() {
            const modals = document.querySelectorAll('.modal');
            
            modals.forEach(modal => {
                modal.addEventListener('click', (e) => {
                    if (e.target === modal || e.target.classList.contains('close-btn')) {
                        modal.classList.remove('active');
                    }
                });
            });
        }

        // Time period buttons
        function initTimeButtons() {
            const buttons = document.querySelectorAll('.time-btn');
            
            buttons.forEach(button => {
                button.addEventListener('click', () => {
                    buttons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    
                    // Here you would typically filter the chart data
                    // For demo purposes, we'll just show the active state
                });
            });
        }

        // Global function for analyst profile
        window.showAnalystProfile = showAnalystProfile;

        // Initialize everything
        document.addEventListener('DOMContentLoaded', () => {
            initChart();
            renderAnalysts();
            initSearch();
            initModals();
            initTimeButtons();
        });
    </script>
</body>
</html>